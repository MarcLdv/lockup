import * as SQLite from 'expo-sqlite';

const db = SQLite.openDatabase('vault.db');

function initDb() {
  db.transaction(tx => {
    tx.executeSql(
      `CREATE TABLE IF NOT EXISTS vault_items (
         id INTEGER PRIMARY KEY AUTOINCREMENT,
         pseudo TEXT NOT NULL,
         url TEXT NOT NULL,
         password_encrypted TEXT NOT NULL,
         created_at TEXT DEFAULT CURRENT_TIMESTAMP
       );`
    );
  });
}

function addItem(pseudo: string, url: string, passwordEncrypted: string) {
  db.transaction(tx => {
    tx.executeSql(
      'INSERT INTO vault_items (pseudo, url, password_encrypted) VALUES (?, ?, ?);',
      [pseudo, url, passwordEncrypted]
    );
  });
}

// Appel au d√©marrage :
initDb();